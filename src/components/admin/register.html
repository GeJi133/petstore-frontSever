<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Responsive Admin Dashboard Template">
    <meta name="keywords" content="admin,dashboard">
    <meta name="author" content="stacks">
    <!-- The above 6 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Title -->
    <title>Connect - Responsive Admin Dashboard Template</title>

    <!-- Styles -->
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">
    <link href="/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/plugins/font-awesome/css/all.min.css" rel="stylesheet">


    <!-- Theme Styles -->
    <link href="/css/connect.min.css" rel="stylesheet">
    <link href="/css/admin3.css" rel="stylesheet">
    <link href="/css/dark_theme.css" rel="stylesheet">
    <link href="/css/custom.css" rel="stylesheet">


    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <script type="text/javascript" src="http://cdn.hcharts.cn/jquery/jquery-1.8.3.min.js"></script>

    <script type="text/javascript">
        $(function() {
            $("#inputUserName").blur(function () {
                var input_name = $(this).val();
                if (input_name) {
                    url = "http://localhost/users/username/" + input_name;
                    $.get(url, function (data, status) {
                        if (data) {
                            $('#usernamemessage').text("用户名不可用")
                        } else {
                            $('#usernamemessage').text("")

                        }
                    });
                }
            });
            $("#checkPassword").blur(function () {
                var password = $('#inputPassword').val();
                var checkPassword = $('#checkPassword').val()
                console.log(password + checkPassword);
                if (checkPassword != password) {
                    $('#passwordmessage').text("两次输入密码不一致")
                } else {
                    $('#passwordmessage').text("")
                }
            });
            // $("#inputUserName").blur(function(){
            //     var input_name = $('username').val();
            //     if(input_name){
            //         alert("用户名不能为空");
            //     }
            // });

        });
        function check() {
            var flag=false;
            $("#submitButton").text("change");
            // alert("点击暗金");
            var username = $('#inputUserName').val();
            var password = $('#inputPassword').val();
            var checkPassword = $('#inputPassword').val();
            var phone = $('#phonenumber').val();
            var state = $('#inputState').val();
            var address1 = $('#inputAddress1').val();
            var address2 = $('#inputAddress2').val();
            var city = $('#inputCity').val();
            var zip = $('#inputZip').val();
            var status = $('#inputStatus').val();

            if (input_name) {
                url = "http://localhost/users/username/" + input_name;
                $.get(url, function (data, status) {
                    if (data) {
                        $('#usernamemessage').text("用户名不可用")
                    } else if (checkPassword && password) {
                        if (checkPassword != password) {
                            $('#usernamemessage').text("lalal")
                            $('#passwordmessage').text("两次输入密码不一致")
                        } else {
                            if (phone && state && address1 && address2 && city && zip) {
                                flag=true;
                                // url = "/users/register";
                                // console.log(url);
                                // data = {
                                //     username: input_name,
                                //     password: password,
                                //     phone: phone,
                                //     state: state,
                                //     address1: address1,
                                //     address2: address2,
                                //     city: city,
                                //     zip: zip,
                                //     status: input_status
                                // }
                                // $.post(url, data);
                            } else {
                                $('#usernamemessage').text("请输入完整信息");
                            }
                        }
                    } else {
                        $('#passwordmessage').text("密码不能为空")
                    }
                });
            } else {
                $('#usernamemessage').text("用户名不能为空")
            }
            return flag;
        }
    </script>

    <![endif]-->
</head>
<body class="auth-page sign-in">

<div class='loader'>
    <div class='spinner-grow text-primary' role='status'>
        <span class='sr-only'>Loading...</span>
    </div>
</div>
<div class="connect-container align-content-stretch d-flex flex-wrap">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xl">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">注册新用户</h5>
                            <form  onsubmit="return check()" action="/users/register" method="post">
<!--                            <div class="form-row">-->
                                <div class="form-group col-md-6 offset-3">
                                    <label for="inputUserName">用户名</label>
                                    <input type="text" class="form-control" id="inputUserName" name="username" placeholder="Email">
                                    <p id="usernamemessage"></p>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="inputPassword">密码</label>
                                    <input type="password" class="form-control" id="inputPassword" name="password" placeholder="Password">
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="checkPassword">重复密码</label>
                                    <input type="password" class="form-control" id="checkPassword" name="checkpassword" placeholder="CheckPassword">
                                    <p id="passwordmessage"></p>
                                </div>
<!--                            </div>-->
                            <div class="form-group">
                                <label for="phonenumber">电话号码</label>
                                <input type="text" class="form-control" id="phonenumber" name="phonenumber" placeholder="1234 Main St">
                            </div>
                            <div class="form-group">
                                <label for="inputAddress1">地址1</label>
                                <input type="text" class="form-control" id="inputAddress1" name="address1" placeholder="1234 Main St">
                            </div>
                            <div class="form-group">
                                <label for="inputAddress2">地址2</label>
                                <input type="text" class="form-control" id="inputAddress2" name="address2" placeholder="Apartment, studio, or floor">
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="inputCity">城市</label>
                                    <input type="text" class="form-control" name="city" id="inputCity">
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="inputState">国家</label>
                                    <input type="text" class="form-control" name="state" id="inputState">
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="inputStatus">状态</label>
                                    <input type="text" class="form-control" name="status" id="inputStatus">
                                </div>
                                <div class="form-group col-md-2">
                                    <label for="inputZip">Zip</label>
                                    <input type="text" class="form-control" name="zip" id="inputZip">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="custom-control custom-checkbox">
                                    <input class="custom-control-input" type="checkbox" id="gridCheck">
                                    <label class="custom-control-label" for="gridCheck">
                                        Check me out
                                    </label>
                                </div>
                            </div>
                            <button type="submit" id="submitButton"  class="btn btn-primary">注册</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Javascripts -->
<script src="/plugins/jquery/jquery-3.4.1.min.js"></script>
<script src="/plugins/bootstrap/popper.min.js"></script>
<script src="/plugins/bootstrap/js/bootstrap.min.js"></script>
<script src="/plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<script src="/js/connect.min.js"></script>
</body>
</html>